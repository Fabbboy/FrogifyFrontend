<script>

    import {loggedIn} from "../Controler.js";
    import {getProfilePicture} from "./Feed/FeedManager.js";

    let loggedInSub;
    loggedIn.subscribe((value) => {
        loggedInSub = value;
    });


    let profileImageSrc = "";

    async function updateProfileImage() {
        if (loggedInSub) {
            const profileImage = await getProfilePicture();
            if (profileImage !== null) {
                console.log("profileImage: ", profileImage);
                profileImageSrc = profileImage;
            }
        }
    }

    $: loggedInSub, updateProfileImage();

</script>

<div class="baseHeader">
    <a href="/" class="baseHeaderLogo"></a>
    <p class="baseHeaderName">Frogify</p>
    <p class="baseHeaderUndertitle">SMA-Fr√∂schmatt</p>

    {#if loggedInSub === true}
        <img src={profileImageSrc} alt="profile" class="profileImage"/>
    {/if}
</div>


<style>
    .baseHeader{
        width: 100%;
        height: 115px;
        background-color: #292A2F;
        border-bottom: 4px solid #464646;
    }

    .baseHeaderLogo{
        background-image: url("../../assets/logo.svg");
        background-size: contain;
        background-repeat: no-repeat;
        width: 180px;
        height: 90px;
        display: block;
        position: relative;
        top: 10%;
        left: 1%;
    }

    .baseHeaderName {
        font-weight: bolder;
        color: #fff;
        font-size:1.8em;
        position: relative;
        top: -74%;
        left: 8%;
    }

    .baseHeaderUndertitle {
        color: #fff;
        font-size:1em;
        position: relative;
        top: -103%;
        left: 8%;
    }

    .profileImage{
        width: 70px;
        height: 70px;
        border-radius: 50%;
        position: relative;
        top: -195px;
        left: 93.5%;
    }
</style>